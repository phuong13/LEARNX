import{V as f,r as d,j as p,X as I,Y as x,a3 as C}from"./index-D3Pv7_aB.js";import{C as E}from"./CreateCurriculumForm-rNX_ufPC.js";import{u as q}from"./Close-B9ExWXoQ.js";import"./Add-nQ9i5Fms.js";import"./Quiz-D2ItrxcA.js";import"./MenuItem-DLlDOBM8.js";import"./IconButton-BQqSut5L.js";import"./Grid-CsTaVpxS.js";import"./quill.snow-BU9ilKDC.js";import"./InputAdornment-DsIJoGon.js";import"./Chip-D1GTb4Ic.js";function y(e){var u,l,c,m;let s;e.questionType==="SINGLE_CHOICE"?s="single":e.questionType==="MULTIPLE_CHOICE"?s="multiple":e.questionType==="TRUE_FALSE"?s="truefalse":s="fitb";const n=[...e.options].sort((o,i)=>o.seq-i.seq),t=n.map(o=>o.content);let r;if(s==="single"||s==="truefalse"){const o=(l=(u=e.answers)==null?void 0:u[0])==null?void 0:l.answerId;r=n.findIndex(a=>a.id.optionId===o)}else{const o=((c=e.answers)==null?void 0:c.map(i=>i.answerId))||[];r=n.map((i,a)=>o.includes(i.id.optionId)?a:-1).filter(i=>i!==-1)}return{id:e.id,type:s,content:e.content,answerContent:(m=e.answers)==null?void 0:m.map(o=>o.answerContent).join(", "),options:t,answer:r}}function M(e){return e.map(s=>{var n;return{...s,contents:((n=s.contents)==null?void 0:n.map(t=>t.type==="quiz"&&t.questions?{...t,questions:t.questions.map(y)}:t))||[]}})}const P=()=>{const{courseId:e}=f(),{getModules:s}=q();localStorage.removeItem("courseInfo");const[n,t]=d.useState([]),[r,u]=d.useState(!0);return d.useEffect(()=>{(async()=>{u(!0);const c=await s(e);c.success&&t(M(c.modules)),u(!1)})()},[e]),r?p.jsx(I,{display:"flex",justifyContent:"center",mt:10,children:p.jsx(x,{})}):p.jsx(E,{isEdit:!0,initialModules:n,onSubmitSuccess:()=>{C.success("Cập nhật module thành công!"),window.history.back()}})};export{P as default};
