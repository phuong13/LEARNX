import{W as f,r as d,j as p,Y as I,a3 as x}from"./index-CvZu1GkB.js";import{C}from"./CreateCurriculumForm-pic5AKFm.js";import{u as E}from"./Close-DEsXqCmB.js";import{C as q}from"./CircularProgress-B5iBW3gh.js";import"./Add-DRMiLoTS.js";import"./Quiz-ggl-Jl1s.js";import"./MenuItem-DiZ2X_gK.js";import"./Grid-DUCqZvDN.js";import"./quill.snow-Vi_xJyy1.js";import"./CardContent-1PSVZ9mV.js";import"./InputAdornment-C8Nk8D1V.js";import"./Chip-_sI3gbFY.js";function y(e){var u,l,c,m;let s;e.questionType==="SINGLE_CHOICE"?s="single":e.questionType==="MULTIPLE_CHOICE"?s="multiple":e.questionType==="TRUE_FALSE"?s="truefalse":s="fitb";const n=[...e.options].sort((o,i)=>o.seq-i.seq),t=n.map(o=>o.content);let r;if(s==="single"||s==="truefalse"){const o=(l=(u=e.answers)==null?void 0:u[0])==null?void 0:l.answerId;r=n.findIndex(a=>a.id.optionId===o)}else{const o=((c=e.answers)==null?void 0:c.map(i=>i.answerId))||[];r=n.map((i,a)=>o.includes(i.id.optionId)?a:-1).filter(i=>i!==-1)}return{id:e.id,type:s,content:e.content,answerContent:(m=e.answers)==null?void 0:m.map(o=>o.answerContent).join(", "),options:t,answer:r}}function M(e){return e.map(s=>{var n;return{...s,contents:((n=s.contents)==null?void 0:n.map(t=>t.type==="quiz"&&t.questions?{...t,questions:t.questions.map(y)}:t))||[]}})}const _=()=>{const{courseId:e}=f(),{getModules:s}=E();localStorage.removeItem("courseInfo");const[n,t]=d.useState([]),[r,u]=d.useState(!0);return d.useEffect(()=>{(async()=>{u(!0);const c=await s(e);c.success&&t(M(c.modules)),u(!1)})()},[e]),r?p.jsx(I,{display:"flex",justifyContent:"center",mt:10,children:p.jsx(q,{})}):p.jsx(C,{isEdit:!0,initialModules:n,onSubmitSuccess:()=>{x.success("Cập nhật module thành công!"),window.history.back()}})};export{_ as default};
