import{e as h,j as t,I as b,V as j,o as C,r as p,s as g,z as y}from"./index-C1vOwBGC.js";import{C as E}from"./CreateCurriculumForm-C2ZjbMz6.js";import{T as S,u as M}from"./Close-DGyuS9GN.js";import{C as q}from"./CircularProgress-CB3Fh7cP.js";import"./Add-CPTu30PZ.js";import"./Quiz-AEMee4NZ.js";import"./Cancel-Q2Vr1c-b.js";import"./MenuItem-Ci-Najrl.js";import"./Grid-D3g-tiwt.js";import"./InputAdornment-BZ7zL1cQ.js";import"./index-fVpE7Ccm.js";import"./Chip-j-faxFnp.js";const I=h(t.jsx("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"}),"KeyboardReturn");function T({onClick:e,children:s="Trở lại",variant:i="text",size:o="medium",color:u="inherit",className:c="",showIcon:d=!0,iconOnly:l=!1,disabled:m=!1,tooltip:n="",sx:r={},...a}){const f=()=>{e?e():history.back()};if(l){const x=t.jsx(b,{onClick:f,disabled:m,color:u,size:o,className:c,sx:{border:"none",color:"#6b7280","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)",color:"#374151"},...r},...a,children:t.jsx(I,{})});return n?t.jsx(S,{title:n,children:x}):x}return t.jsx(j,{variant:i,size:o,color:u,onClick:f,disabled:m,className:c,startIcon:d?t.jsx(I,{}):null,sx:{border:"none",boxShadow:"none",color:"#6b7280","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)",boxShadow:"none",color:"#374151"},...r},...a,children:s})}function k(e){var c,d,l,m;let s;e.questionType==="SINGLE_CHOICE"?s="single":e.questionType==="MULTIPLE_CHOICE"?s="multiple":e.questionType==="TRUE_FALSE"?s="truefalse":s="fitb";const i=[...e.options].sort((n,r)=>n.seq-r.seq),o=i.map(n=>n.content);let u;if(s==="single"||s==="truefalse"){const n=(d=(c=e.answers)==null?void 0:c[0])==null?void 0:d.answerId;u=i.findIndex(a=>a.id.optionId===n)}else{const n=((l=e.answers)==null?void 0:l.map(r=>r.answerId))||[];u=i.map((r,a)=>n.includes(r.id.optionId)?a:-1).filter(r=>r!==-1)}return{id:e.id,type:s,content:e.content,answerContent:(m=e.answers)==null?void 0:m.map(n=>n.answerContent).join(", "),options:o,answer:u}}function w(e){return e.map(s=>{var i;return{...s,contents:((i=s.contents)==null?void 0:i.map(o=>o.type==="quiz"&&o.questions?{...o,questions:o.questions.map(k)}:o))||[]}})}const U=()=>{const{courseId:e}=C(),{getModules:s}=M();localStorage.removeItem("courseInfo");const[i,o]=p.useState([]),[u,c]=p.useState(!0);return p.useEffect(()=>{(async()=>{c(!0);const l=await s(e);l.success&&o(w(l.modules)),c(!1)})()},[e]),u?t.jsx(g,{display:"flex",justifyContent:"center",mt:10,children:t.jsx(q,{})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"ml-4",children:t.jsx(T,{})}),t.jsx(E,{isEdit:!0,initialModules:i,onSubmitSuccess:()=>{y.success("Cập nhật module thành công!"),window.history.back()}})]})};export{U as default};
