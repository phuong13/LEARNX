import{e as at,ah as nt,ag as it,U as he,Z as Ve,aj as ge,ao as Ue,al as Je,r as T,am as pt,N as lt,W as ct,cc as te,ai as ut,cd as dt,ce as je,aR as mt,aS as ft,S as oe,cf as Ee,cg as se,j as C,ap as ht,ch as gt,ci as ke,g as He,c0 as ye,c1 as we,aw as yt,cj as re,ck as _e}from"./index-DGjaC9jB.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function wt(t){return it("MuiTooltip",t)}const d=nt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function vt(t){return Math.round(t*1e5)/1e5}const bt=t=>{const{classes:e,disableInteractive:i,arrow:y,touch:w,placement:b}=t,O={popper:["popper",!i&&"popperInteractive",y&&"popperArrow"],tooltip:["tooltip",y&&"tooltipArrow",w&&"touch",`tooltipPlacement${Ue(b.split("-")[0])}`],arrow:["arrow"]};return ht(O,wt,e)},Tt=he(Ve,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.popper,!i.disableInteractive&&e.popperInteractive,i.arrow&&e.popperArrow,!i.open&&e.popperClose]}})(ge(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${d.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${d.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${d.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${d.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${d.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${d.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${d.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${d.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),xt=he("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.tooltip,i.touch&&e.touch,i.arrow&&e.tooltipArrow,e[`tooltipPlacement${Ue(i.placement.split("-")[0])}`]]}})(ge(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Je(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${d.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${d.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${d.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${d.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${vt(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${d.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${d.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${d.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${d.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${d.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${d.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${d.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${d.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${d.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${d.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Rt=he("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(ge(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Je(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let ae=!1;const We=new gt;let Q={x:0,y:0};function ne(t,e){return(i,...y)=>{e&&e(i,...y),t(i,...y)}}const Wt=T.forwardRef(function(e,i){var qe,Ae,Le;const y=pt({props:e,name:"MuiTooltip"}),{arrow:w=!1,children:b,classes:O,components:m={},componentsProps:g={},describeChild:L=!1,disableFocusListener:j=!1,disableHoverListener:q=!1,disableInteractive:D=!1,disableTouchListener:E=!1,enterDelay:N=100,enterNextDelay:A=0,enterTouchDelay:h=700,followCursor:n=!1,id:k,leaveDelay:f=0,leaveTouchDelay:M=1500,onClose:s,onOpen:a,open:P,placement:l="bottom",PopperComponent:p,PopperProps:u={},slotProps:c={},slots:z={},title:I,TransitionComponent:_=Ee,TransitionProps:o,...W}=y,x=T.isValidElement(b)?b:C.jsx("span",{children:b}),B=lt(),X=ct(),[v,ie]=T.useState(),[F,Qe]=T.useState(null),G=T.useRef(!1),pe=D||n,xe=te(),le=te(),K=te(),Re=te(),[Xe,$e]=ut({controlled:P,default:!1,name:"Tooltip",state:"open"});let S=Xe;const ce=dt(k),V=T.useRef(),Y=je(()=>{V.current!==void 0&&(document.body.style.WebkitUserSelect=V.current,V.current=void 0),Re.clear()});T.useEffect(()=>Y,[Y]);const Ce=r=>{We.clear(),ae=!0,$e(!0),a&&!S&&a(r)},Z=je(r=>{We.start(800+f,()=>{ae=!1}),$e(!1),s&&S&&s(r),xe.start(B.transitions.duration.shortest,()=>{G.current=!1})}),ee=r=>{G.current&&r.type!=="touchstart"||(v&&v.removeAttribute("title"),le.clear(),K.clear(),N||ae&&A?le.start(ae?A:N,()=>{Ce(r)}):Ce(r))},ue=r=>{le.clear(),K.start(f,()=>{Z(r)})},[,Me]=T.useState(!1),Pe=r=>{ke(r.target)||(Me(!1),ue(r))},ze=r=>{v||ie(r.currentTarget),ke(r.target)&&(Me(!0),ee(r))},Se=r=>{G.current=!0;const $=x.props;$.onTouchStart&&$.onTouchStart(r)},Ge=r=>{Se(r),K.clear(),xe.clear(),Y(),V.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Re.start(h,()=>{document.body.style.WebkitUserSelect=V.current,ee(r)})},Ke=r=>{x.props.onTouchEnd&&x.props.onTouchEnd(r),Y(),K.start(M,()=>{Z(r)})};T.useEffect(()=>{if(!S)return;function r($){$.key==="Escape"&&Z($)}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[Z,S]);const Ye=mt(ft(x),ie,i);!I&&I!==0&&(S=!1);const de=T.useRef(),Ze=r=>{const $=x.props;$.onMouseMove&&$.onMouseMove(r),Q={x:r.clientX,y:r.clientY},de.current&&de.current.update()},U={},me=typeof I=="string";L?(U.title=!S&&me&&!q?I:null,U["aria-describedby"]=S?ce:null):(U["aria-label"]=me?I:null,U["aria-labelledby"]=S&&!me?ce:null);const R={...U,...W,...x.props,className:oe(W.className,x.props.className),onTouchStart:Se,ref:Ye,...n?{onMouseMove:Ze}:{}},J={};E||(R.onTouchStart=Ge,R.onTouchEnd=Ke),q||(R.onMouseOver=ne(ee,R.onMouseOver),R.onMouseLeave=ne(ue,R.onMouseLeave),pe||(J.onMouseOver=ee,J.onMouseLeave=ue)),j||(R.onFocus=ne(ze,R.onFocus),R.onBlur=ne(Pe,R.onBlur),pe||(J.onFocus=ze,J.onBlur=Pe));const et=T.useMemo(()=>{var $;let r=[{name:"arrow",enabled:!!F,options:{element:F,padding:4}}];return($=u.popperOptions)!=null&&$.modifiers&&(r=r.concat(u.popperOptions.modifiers)),{...u.popperOptions,modifiers:r}},[F,u]),H={...y,isRtl:X,arrow:w,disableInteractive:pe,placement:l,PopperComponentProp:p,touch:G.current},fe=bt(H),Oe=z.popper??m.Popper??Tt,De=z.transition??m.Transition??_??Ee,Ne=z.tooltip??m.Tooltip??xt,Ie=z.arrow??m.Arrow??Rt,tt=se(Oe,{...u,...c.popper??g.popper,className:oe(fe.popper,u==null?void 0:u.className,(qe=c.popper??g.popper)==null?void 0:qe.className)},H),ot=se(De,{...o,...c.transition??g.transition},H),st=se(Ne,{...c.tooltip??g.tooltip,className:oe(fe.tooltip,(Ae=c.tooltip??g.tooltip)==null?void 0:Ae.className)},H),rt=se(Ie,{...c.arrow??g.arrow,className:oe(fe.arrow,(Le=c.arrow??g.arrow)==null?void 0:Le.className)},H);return C.jsxs(T.Fragment,{children:[T.cloneElement(x,R),C.jsx(Oe,{as:p??Ve,placement:l,anchorEl:n?{getBoundingClientRect:()=>({top:Q.y,left:Q.x,right:Q.x,bottom:Q.y,width:0,height:0})}:v,popperRef:de,open:v?S:!1,id:ce,transition:!0,...J,...tt,popperOptions:et,children:({TransitionProps:r})=>C.jsx(De,{timeout:B.transitions.duration.shorter,...r,...ot,children:C.jsxs(Ne,{...st,children:[I,w?C.jsx(Ie,{...rt,ref:Qe}):null]})})})]})}),Bt=He(C.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),Ft=He(C.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"}),"InsertDriveFile");var ve={},$t=we;Object.defineProperty(ve,"__esModule",{value:!0});var Ct=ve.default=void 0,Mt=$t(ye()),Be=C;Ct=ve.default=(0,Mt.default)([(0,Be.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,Be.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook");const Pt={lecture:"lectures",quiz:"quizzes",assignment:"assignments",resource:"resources"},Vt=()=>{const t=yt(),e=async(y,w)=>{var b,O,m,g,L,j,q;try{const D=await i(w);if(!D.success)return{success:!1};const E=D.modules||[],N=new Map;E.forEach(h=>N.set(h.id,h));const A=[];for(const h of y){let n=h.id;if(!n||String(n).startsWith("temp-"))n=(await t.post("/modules",{name:h.title,courseId:w})).data.data.id;else{const s=N.get(n);s&&s.title!==h.title&&await t.patch(`/modules/${n}`,{name:h.title})}A.push(n);const f=N.get(n),M=[];if(Array.isArray(h.contents)&&h.contents.length>0)for(const s of h.contents){let a=s.id;const P=!a||String(a).startsWith("temp-");if(s.type==="lecture"){const l={title:s.title,content:s.content||"",moduleId:n};if(P)a=(await t.post("/lectures",l)).data.data.id;else{const p=(b=f==null?void 0:f.contents)==null?void 0:b.find(u=>u.id===a&&u.type==="lecture");(!p||p.title!==s.title||p.content!==s.content)&&await t.patch(`/lectures/${a}`,l)}M.push(a)}else if(s.type==="quiz"){let l=s.id;const p=!l||String(l).startsWith("temp-"),u={title:s.title,description:s.description||"",startDate:re(s.startDate),endDate:re(s.endDate),timeLimit:Number(s.timeLimit||0),shuffled:s.shuffled||!1},c={...u,attemptAllowed:s.attemptAllowed||0};if(p)l=(await t.post("/quizzes",{...u,attemptAllowed:s.attemptAllowed||0,moduleId:n})).data.data.id,s.id=l;else{const o=(O=f==null?void 0:f.contents)==null?void 0:O.find(x=>x.id===l&&x.type==="quiz");(!o||o.title!==s.title||o.description!==s.description||o.startDate!==s.startDate||o.endDate!==s.endDate||o.attemptAllowed!==c.attemptAllowed||o.timeLimit!==c.timeLimit||o.shuffled!==c.shuffled)&&await t.patch(`/quizzes/${l}`,c)}const z=((g=(m=f==null?void 0:f.contents)==null?void 0:m.find(o=>o.id===l&&o.type==="quiz"))==null?void 0:g.questions)||[],I=z.map(o=>o.id),_=[];for(const o of s.questions){const W=!o.id||String(o.id).startsWith("temp-"),B=`/question-quizzes/${o.type==="single"?"scq":o.type==="multiple"?"mcq":o.type==="truefalse"?"tfq":"fitb"}`,X={content:o.content||"",quizId:l,outcomeId:o.outcomeId||null,...o.type!=="fitb"?{options:o.options}:{},...o.type==="fitb"?{answerContent:o.answerContent}:{},...o.type==="multiple"?{answers:o.answer}:o.type!=="fitb"?{answer:o.answer}:{}};if(W){const v=await t.post(B,X);_.push(v.data.data.id)}else{_.push(o.id);const v=z.find(F=>F.id===o.id);(!v||v.content!==o.content||o.type!=="fitb"&&JSON.stringify(v.options)!==JSON.stringify(o.options)||o.type==="fitb"&&v.answerContent!==o.answerContent||(o.type==="multiple"?JSON.stringify(v.answers)!==JSON.stringify(o.answer):o.type!=="fitb"&&v.answer!==o.answer))&&await t.patch(`${B}/${o.id}`,X)}}for(const o of I)_.includes(o)||await t.delete(`/question-quizzes/${o}`);M.push(a)}else if(s.type==="assignment"){const l={title:s.title,content:s.content||"",state:s.state||"OPEN",startDate:re(s.startDate),endDate:re(s.endDate),moduleId:n};if(P)a=(await t.post("/assignments",l)).data.data.id;else{const p=(L=f==null?void 0:f.contents)==null?void 0:L.find(u=>u.id===a&&u.type==="assignment");(!p||p.title!==s.title||p.content!==s.content||p.startDate!==s.startDate||p.endDate!==s.endDate||p.state!==s.state)&&await t.patch(`/assignments/${a}`,l)}M.push(a)}else if(s.type==="resource"){const l=s.resourceData;if(l instanceof FormData){for(const[c,z]of l.entries())console.log(`${c}:`,z);const p=l.get("resources");let u;try{if(p instanceof Blob){const c=await p.text();u=JSON.parse(c)}else u=JSON.parse(p)}catch(c){console.error("❌ Lỗi khi parse JSON từ 'resources':",c);return}u.moduleId=n,l.set("resources",new Blob([JSON.stringify(u)],{type:"application/json"}));try{let c;P?(c=await t.post("/resources",l,{headers:{"Content-Type":"multipart/form-data"}}),a=(q=(j=c.data)==null?void 0:j.data)==null?void 0:q.id):c=await t.patch(`/resources/${a}`,l,{headers:{"Content-Type":"multipart/form-data"}}),a&&!String(a).startsWith("temp-")&&M.push(a)}catch(c){console.error("❌ Lỗi khi gửi FormData:",c)}}else if(!P)try{const p={file:s.urlDocument};await t.patch(`/resources/${a}`,p),a&&!String(a).startsWith("temp-")&&M.push(a)}catch(p){console.error("❌ Lỗi khi PATCH resource không có FormData:",p)}}}if(f){const s=(f.contents||[]).map(a=>({id:a.id,type:a.type}));for(const a of s)if(!M.includes(a.id)){const P=Pt[a.type];P&&await t.delete(`/${P}/${a.id}`)}}}for(const h of E)A.includes(h.id)||await t.delete(`/modules/${h.id}`);return{success:!0}}catch(D){return console.error("❌ submitModules error:",D),{success:!1}}},i=async y=>{try{const b=(await t.get(`/courses/${y}/modules`)).data.data;return{success:!0,modules:await Promise.all(b.map(async m=>{const[g,L,j,q]=await Promise.all([t.get(`/modules/${m.id}/lectures`),t.get(`/modules/${m.id}/resources`),t.get(`/modules/${m.id}/assignments`),t.get(`/modules/${m.id}/quizzes`)]),D=g.data.data.map(n=>({...n,type:"lecture"})),E=L.data.data.map(n=>({...n,type:"resource"})),N=j.data.data.map(n=>({...n,type:"assignment"})),A=await Promise.all(q.data.data.map(async n=>{const k=await t.get(`/quizzes/${n.id}/questions`);return{...n,type:"quiz",questions:k.data.data}})),h=[...D,...E,...N,...A];return h.sort((n,k)=>{const f=_e(n.createdAt),M=_e(k.createdAt);return f-M}),{id:m.id,title:m.name,contents:h}}))}}catch(w){return console.error(w),{success:!1,modules:[]}}};return{submitModules:e,getModules:i}};var be={},zt=we;Object.defineProperty(be,"__esModule",{value:!0});var St=be.default=void 0,Ot=zt(ye()),Dt=C;St=be.default=(0,Ot.default)((0,Dt.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var Fe=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Nt(t,e){return!!(t===e||Fe(t)&&Fe(e))}function It(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!Nt(t[i],e[i]))return!1;return!0}function qt(t,e){e===void 0&&(e=It);var i,y=[],w,b=!1;function O(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];return b&&i===this&&e(m,y)||(w=t.apply(this,m),b=!0,i=this,y=m),w}return O}const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));var Te={},At=we;Object.defineProperty(Te,"__esModule",{value:!0});var Lt=Te.default=void 0,jt=At(ye()),Et=C;Lt=Te.default=(0,jt.default)((0,Et.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");export{Bt as A,Ft as D,Wt as T,_t as X,St as a,Lt as b,qt as c,Ct as d,Ut as m,Vt as u};
