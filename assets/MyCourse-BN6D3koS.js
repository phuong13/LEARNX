import{j as e,L as f,u as g,a as w,r,b as N,T as b,D as C,c as S}from"./index-OOWise-w.js";import{d as T}from"./Add-BX3xwFxN.js";import{d as P}from"./Search-nvRYpf6M.js";import{I as k}from"./InputAdornment-CtwYX_0-.js";import{P as E,C as L}from"./course.service-BSU5Jiib.js";function A({id:a,name:s,description:c,thumbnail:i}){return e.jsx("div",{className:"w-full rounded-lg overflow-hidden shadow-md bg-white hover:shadow-xl ",children:e.jsxs(f,{to:`/course-detail/${a}`,children:[e.jsx("div",{className:"relative h-36",children:e.jsx("img",{src:i,alt:"Online learning illustration",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl mb-2 text-gray-800",children:s}),e.jsx("p",{className:"text-sm",children:c})]})})})]})},a)}function z({onSearch:a}){const{authUser:s}=g(),[c,i]=w(),[l,h]=r.useState(c.get("search")||""),{t:n}=N();r.useEffect(()=>{a&&a(l)},[l]);const m=x=>{const o=x.target.value;h(o),i(o?{search:o}:{})};return e.jsxs("div",{className:"flex-col flex w-full gap-y-2",children:[e.jsx("div",{className:"text-slate-600 font-semibold text-xl",children:s.role==="TEACHER"?n("manage_courses"):n("my_courses")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mb-2 w-full",children:[e.jsx(b,{fullWidth:!0,placeholder:"Tìm kiếm khoá học...",value:l,onChange:m,variant:"outlined",size:"small",sx:{maxWidth:"100%"},InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(P,{color:"action"})})}}),(s==null?void 0:s.role)==="TEACHER"&&e.jsx(f,{to:"/add-course",children:e.jsxs("button",{className:"ml-2 h-10 px-2 text-base bg-primaryDark text-center text-white rounded-lg hover:bg-secondary transition-colors flex items-center justify-center gap-1 min-w-44",style:{lineHeight:1},children:[e.jsx(T,{className:"w-4 h-4",fontSize:"small"}),"Thêm khóa học"]})})]})]})}const R=()=>{const{authUser:a}=g(),[s,c]=r.useState([]),[i,l]=r.useState(!1),h=8,[n,m]=r.useState(0),[x,o]=r.useState(0),[j,p]=r.useState("");r.useEffect(()=>{l(!0);const t={page:n,size:h};(async()=>{try{const d=await L.getMyCourses(a.role,t);c(d.content),m(d.number),o(d.totalPages)}catch(d){console.log(d)}finally{l(!1)}})()},[a.role,n,h]);const v=(t,u)=>{m(u-1)},y=t=>{p(t)};return e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-217px)] m-4",children:[e.jsx(C,{title:"Khóa học của tôi"}),e.jsxs("div",{className:"flex-grow p-3 rounded-lg bg-white shadow-sm",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(z,{onSearch:y})}),i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(S,{isLoading:!0})}):e.jsxs(e.Fragment,{children:[!((s==null?void 0:s.length)>0)&&e.jsx("div",{className:"text-center justify-center",children:"Bạn chưa đăng ký khóa học nào!"}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:Array.isArray(s)&&s.filter(t=>t.name.toLowerCase().includes(j.toLowerCase())).map(t=>e.jsx(A,{id:t.id,name:t.name,description:t.description,thumbnail:t.thumbnail},t.id))})]})]}),e.jsx(E,{count:x,page:n+1,color:"primaryDark",className:"flex justify-center mt-2",onChange:v})]})};export{R as default};
