import{P as i,j as e,L as g,u as p,a as N,r,b as C,T,D as S,c as P}from"./index-DSFyDKEM.js";import{d as k}from"./Add-CeFD3hM1.js";import{d as E}from"./Search-DQzMMAbS.js";import{I as L}from"./InputAdornment-D_8qXyf6.js";import{P as A,C as R}from"./course.service-CpsFWlks.js";function j({id:a,name:s,description:c,thumbnail:o}){return e.jsx("div",{className:"w-full rounded-lg overflow-hidden shadow-md bg-white hover:shadow-xl ",children:e.jsxs(g,{to:`/course-detail/${a}`,children:[e.jsx("div",{className:"relative h-36 bg-green-100",children:e.jsx("img",{src:o,alt:"Online learning illustration",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl mb-2 text-gray-800",children:s}),e.jsx("p",{className:"text-sm",children:c})]})})})]})},a)}j.propTypes={id:i.oneOfType([i.string,i.number]).isRequired,name:i.string.isRequired,description:i.string.isRequired,thumbnail:i.string.isRequired};function q({onSearch:a}){const{authUser:s}=p(),[c,o]=N(),[n,h]=r.useState(c.get("search")||""),{t:l}=C();r.useEffect(()=>{a&&a(n)},[n]);const u=x=>{const d=x.target.value;h(d),o(d?{search:d}:{})};return e.jsxs("div",{className:"flex-col flex w-full gap-y-2",children:[e.jsx("div",{className:"text-slate-600 font-semibold text-xl",children:s.role==="TEACHER"?l("manage_courses"):l("my_courses")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center mb-2 w-full",children:[e.jsx(T,{fullWidth:!0,placeholder:"Tìm kiếm khoá học...",value:n,onChange:u,variant:"outlined",size:"small",sx:{maxWidth:"100%"},InputProps:{startAdornment:e.jsx(L,{position:"start",children:e.jsx(E,{color:"action"})})}}),(s==null?void 0:s.role)==="TEACHER"&&e.jsx(g,{to:"/add-course",children:e.jsxs("button",{className:"ml-2 h-10 px-2 text-base bg-primaryDark text-center text-white rounded-lg hover:bg-secondary transition-colors flex items-center justify-center gap-1 min-w-44",style:{lineHeight:1},children:[e.jsx(k,{className:"w-4 h-4",fontSize:"small"}),"Thêm khóa học"]})})]})]})}const H=()=>{const{authUser:a}=p(),[s,c]=r.useState([]),[o,n]=r.useState(!1),h=12,[l,u]=r.useState(0),[x,d]=r.useState(0),[v,y]=r.useState("");r.useEffect(()=>{n(!0);const t={page:l,size:h};(async()=>{try{const m=await R.getMyCourses(a.role,t);c(m.content),u(m.number),d(m.totalPages)}catch(m){console.log(m)}finally{n(!1)}})()},[a.role,l,h]);const b=(t,f)=>{u(f-1)},w=t=>{y(t)};return e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-217px)] m-4",children:[e.jsx(S,{title:"Khóa học của tôi"}),e.jsxs("div",{className:"flex-grow p-3 rounded-lg bg-white shadow-sm",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{onSearch:w})}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(P,{isLoading:!0})}):e.jsxs(e.Fragment,{children:[!((s==null?void 0:s.length)>0)&&e.jsx("div",{className:"text-center justify-center",children:"Bạn chưa đăng ký khóa học nào!"}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mt-4",children:Array.isArray(s)&&s.filter(t=>t.name.toLowerCase().includes(v.toLowerCase())).map(t=>e.jsx(j,{id:t.id,name:t.name,description:t.description,thumbnail:t.thumbnail},t.id))})]})]}),e.jsx(A,{count:x,page:l+1,color:"primaryDark",className:"flex justify-center mt-2",onChange:b})]})};export{H as default};
