import{s as f,r as a,j as p,v as I,C as x,E as C}from"./index-CCl8Dja4.js";import{C as E}from"./CreateCurriculumForm-_HvzWqRN.js";import{u as q}from"./Close-Dc7iWUp2.js";import"./Add-4wcd96Xy.js";import"./Quiz-BWstgmqM.js";import"./MenuItem-D_2sol3o.js";import"./IconButton-DUvvi67q.js";import"./Grid-ComBdR8N.js";import"./InputAdornment-CeO79_0W.js";function y(e){var u,l,c,m;let s;e.questionType==="SINGLE_CHOICE"?s="single":e.questionType==="MULTIPLE_CHOICE"?s="multiple":e.questionType==="TRUE_FALSE"?s="truefalse":s="fitb";const n=[...e.options].sort((o,i)=>o.seq-i.seq),t=n.map(o=>o.content);let r;if(s==="single"||s==="truefalse"){const o=(l=(u=e.answers)==null?void 0:u[0])==null?void 0:l.answerId;r=n.findIndex(d=>d.id.optionId===o)}else{const o=((c=e.answers)==null?void 0:c.map(i=>i.answerId))||[];r=n.map((i,d)=>o.includes(i.id.optionId)?d:-1).filter(i=>i!==-1)}return{id:e.id,type:s,content:e.content,answerContent:(m=e.answers)==null?void 0:m.map(o=>o.answerContent).join(", "),options:t,answer:r}}function M(e){return e.map(s=>{var n;return{...s,contents:((n=s.contents)==null?void 0:n.map(t=>t.type==="quiz"&&t.questions?{...t,questions:t.questions.map(y)}:t))||[]}})}const b=()=>{const{courseId:e}=f(),{getModules:s}=q();localStorage.removeItem("courseInfo");const[n,t]=a.useState([]),[r,u]=a.useState(!0);return a.useEffect(()=>{(async()=>{u(!0);const c=await s(e);c.success&&t(M(c.modules)),u(!1)})()},[e]),r?p.jsx(I,{display:"flex",justifyContent:"center",mt:10,children:p.jsx(x,{})}):p.jsx(E,{isEdit:!0,initialModules:n,onSubmitSuccess:()=>{C.success("Cập nhật module thành công!"),window.history.back()}})};export{b as default};
