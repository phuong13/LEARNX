import{c as M,d as F,j as e,r as c,ag as L,C as T,w as N,B as k,ah as v,T as p,ai as z,L as S,a as I,D as Y}from"./index-QTjKD8RV.js";import{S as E,Q as $,C as P}from"./QuizzHeader-BhcjQdGM.js";import{I as C}from"./Quiz-2LTpQpdq.js";import{G as x}from"./Grid-DoYxYiIY.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),A=F(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");function B(){const[a,f]=c.useState(""),[d,y]=c.useState("this"),[D,j]=c.useState([]),[u,m]=c.useState([]);c.useEffect(()=>{(async()=>{const h=new Date;let r=h.getMonth()+1,n=h.getFullYear();d==="next"&&(r+=1,r>12&&(r=1,n+=1));const s=new URLSearchParams;s.append("month",r.toString()),s.append("year",n.toString());const i=`/dashboard/get-by-month-year?${s.toString()}`;await N.get(i).then(o=>{j(o.data.data.assignments),m(o.data.data.quizzes)}).catch(o=>{k(o.response.data.message,{type:"error"})})})()},[d]);const b=D.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.courseName.toLowerCase().includes(a.toLowerCase())),w=u.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.courseName.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"bg-white m-4 px-6 py-2  rounded-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:L("time")}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:t=>y(t.target.value),className:"appearance-none bg-white border border-slate-400 rounded-md py-2 pl-3 pr-10 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-primaryDark focus:border-primaryDark",children:[e.jsx("option",{value:"this",children:"Tháng này"}),e.jsx("option",{value:"next",children:"Tháng tiếp theo"})]}),e.jsx(T,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",placeholder:"Search by activity type or name",value:a,onChange:t=>f(t.target.value),className:"w-full bg-white border border-slate-400 rounded-md py-2 pl-10 pr-3 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-primaryDark focus:border-primaryDark"}),e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),b.map(t=>e.jsx(E,{courseID:t.courseId,id:t.id,title:`${t.courseName} - ${t.title}`,startDate:t.startDate,endDate:t.endDate},t.id)),w.map(t=>e.jsx($,{courseID:t.courseId,id:t.id,title:`${t.courseName} - ${t.title}`,startDate:t.startDate,endDate:t.endDate},t.id))]})}const H=["T2","T3","T4","T5","T6","T7","CN"];function R(){const[a,f]=c.useState(new Date),[d,y]=c.useState([]),[D,j]=c.useState([]);c.useEffect(()=>{(async()=>{var n,s;try{const i=new URLSearchParams;i.append("month",(a.getMonth()+1).toString()),i.append("year",a.getFullYear().toString());const o=await N.get(`/dashboard/get-by-month-year?${i.toString()}`);y(o.data.data.assignments),j(o.data.data.quizzes)}catch(i){k(((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.message)||"Lỗi khi tải sự kiện")}})()},[a]);const u=new Date(a.getFullYear(),a.getMonth()+1,0).getDate(),m=new Date(a.getFullYear(),a.getMonth(),1).getDay(),b=()=>{const r=[];let n=1;for(let s=0;n<=u;s++){const i=[];for(let o=0;o<7;o++)s===0&&o<(m===0?6:m-1)?i.push(null):n<=u?i.push(n++):i.push(null);r.push(i)}return r},w=r=>d.filter(n=>{const s=new Date(n.endDate);return s.getDate()===r&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}),t=r=>D.filter(n=>{const s=new Date(n.endDate);return s.getDate()===r&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}),h=r=>{f(new Date(a.getFullYear(),a.getMonth()+r))};return e.jsx("div",{className:"bg-white mx-4 rounded-md",children:e.jsxs(v,{sx:{p:2,fontFamily:"'Inter', sans-serif"},children:[e.jsxs(v,{mb:1,children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Lịch"}),e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",gap:1,children:[e.jsx(C,{size:"small",onClick:()=>h(-1),children:e.jsx(P,{fontSize:"small"})}),e.jsxs(p,{variant:"subtitle1",fontWeight:"bold",children:["Tháng ",a.getMonth()+1," / ",a.getFullYear()]}),e.jsx(C,{size:"small",onClick:()=>h(1),children:e.jsx(A,{fontSize:"small"})})]})]}),e.jsx(x,{container:!0,spacing:1,mb:1,children:H.map(r=>e.jsx(x,{item:!0,xs:1.7,children:e.jsx("div",{className:"text-center text-sm font-semibold text-slate-600",children:r})},r))}),b().map((r,n)=>e.jsx(x,{container:!0,spacing:1,children:r.map((s,i)=>{const o=new Date,g=s===o.getDate()&&a.getMonth()===o.getMonth()&&a.getFullYear()===o.getFullYear();return e.jsx(x,{item:!0,xs:1.7,sx:{py:1},children:e.jsxs(z,{variant:"outlined",sx:{minHeight:90,p:.5,bgcolor:g?"#e3f2fd":"transparent",borderColor:g?"primary.light":"divider"},children:[e.jsx(p,{variant:"caption",fontWeight:g?"bold":"light",color:g?"primary.main":"text.secondary",sx:{display:"block",fontSize:"0.8rem"},children:s}),s&&w(s).map(l=>e.jsx(p,{variant:"caption",sx:{display:"block",color:"primary.main",fontSize:"0.75rem",mt:.3,lineHeight:1.2},noWrap:!0,children:e.jsxs(S,{to:`/submission/${l.courseId}/${l.id}`,style:{textDecoration:"none",color:"inherit"},children:["• ",l.courseName," - ",l.title]})},l.id)),s&&t(s).map(l=>e.jsx(p,{variant:"caption",sx:{display:"block",color:"primary.main",fontSize:"0.75rem",mt:.3,lineHeight:1.2},noWrap:!0,children:e.jsxs(S,{to:`/quiz/${l.courseId}/${l.id}`,style:{textDecoration:"none",color:"inherit"},children:["• ",l.courseName," - ",l.title]})},l.id))]})},i)})},n))]})})}const J=()=>(I(),e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-193px)]",children:[e.jsx(Y,{title:"Bảng điều khiển"}),e.jsx(B,{}),e.jsx(R,{})]}));export{J as default};
