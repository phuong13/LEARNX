import{q as f,r as a,j as p,t as I,C as x,A as C}from"./index-BpQV1TEo.js";import{x as E}from"./CreateCurriculumForm-DdH78-7b.js";import{u as q}from"./memoize-one.esm-CF8SZAXQ.js";import"./Add-BOd_tBEA.js";import"./Quiz-Bk_dHuh_.js";import"./IconButton-rVg4WGwH.js";import"./Grid-DEcZ-eSG.js";import"./MenuItem-0ivOLQRT.js";import"./InputAdornment-BRxDvZJ8.js";function M(e){var l,c,r,m;let s;e.questionType==="SINGLE_CHOICE"?s="single":e.questionType==="MULTIPLE_CHOICE"?s="multiple":e.questionType==="TRUE_FALSE"?s="truefalse":s="fitb";const n=[...e.options].sort((o,i)=>o.seq-i.seq),t=n.map(o=>o.content);let u;if(s==="single"||s==="truefalse"){const o=(c=(l=e.answers)==null?void 0:l[0])==null?void 0:c.answerId;u=n.findIndex(d=>d.id.optionId===o)}else{const o=((r=e.answers)==null?void 0:r.map(i=>i.answerId))||[];u=n.map((i,d)=>o.includes(i.id.optionId)?d:-1).filter(i=>i!==-1)}return{id:e.id,type:s,content:e.content,answerContent:(m=e.answers)==null?void 0:m.map(o=>o.answerContent).join(", "),options:t,answer:u}}function g(e){return e.map(s=>{var n;return{...s,contents:((n=s.contents)==null?void 0:n.map(t=>t.type==="quiz"&&t.questions?{...t,questions:t.questions.map(M)}:t))||[]}})}const b=()=>{const{courseId:e}=f(),{getModules:s}=q();localStorage.removeItem("courseInfo");const[n,t]=a.useState([]),[u,l]=a.useState(!0);return a.useEffect(()=>{(async()=>{l(!0);const r=await s(e);console.log("üöÄ ~ fetchModules ~ res:",r),r.success&&t(g(r.modules)),l(!1)})()},[e]),u?p.jsx(I,{display:"flex",justifyContent:"center",mt:10,children:p.jsx(x,{})}):p.jsx(E,{isEdit:!0,initialModules:n,onSubmitSuccess:()=>{C.success("C·∫≠p nh·∫≠t module th√†nh c√¥ng!"),window.history.back()}})};export{b as default};
