import{c as F,d as L,j as e,r as c,ag as d,C as z,w as k,B as M,ah as S,T as x,ai as I,L as C,a as T,D as Y}from"./index-BK8CZxdw.js";import{S as E,Q as $,C as P}from"./QuizzHeader-sTNY5hlA.js";import{I as N}from"./IconButton-D3hOSUOM.js";import{G as f}from"./Grid-CJRCuznH.js";import"./Quiz-BhKY3MtD.js";/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),A=L(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");function B(){const[a,y]=c.useState(""),[h,D]=c.useState("this"),[j,b]=c.useState([]),[u,g]=c.useState([]);c.useEffect(()=>{(async()=>{const m=new Date;let r=m.getMonth()+1,n=m.getFullYear();h==="next"&&(r+=1,r>12&&(r=1,n+=1));const s=new URLSearchParams;s.append("month",r.toString()),s.append("year",n.toString());const i=`/dashboard/get-by-month-year?${s.toString()}`;await k.get(i).then(o=>{b(o.data.data.assignments),g(o.data.data.quizzes)}).catch(o=>{M(o.response.data.message,{type:"error"})})})()},[h]);const w=j.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.courseName.toLowerCase().includes(a.toLowerCase())),v=u.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())||t.courseName.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"bg-white m-4 px-6 py-2  rounded-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:d("time")}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h,onChange:t=>D(t.target.value),className:"appearance-none bg-white border border-slate-400 rounded-md py-2 pl-3 pr-10 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-primaryDark focus:border-primaryDark",children:[e.jsx("option",{value:"this",children:d("this_month")}),e.jsx("option",{value:"next",children:d("next_month")})]}),e.jsx(z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"})]}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",placeholder:d("placeholder.search_by_name"),value:a,onChange:t=>y(t.target.value),className:"w-full bg-white border border-slate-400 rounded-md py-2 pl-10 pr-3 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-primaryDark focus:border-primaryDark"}),e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),w.map(t=>e.jsx(E,{courseID:t.courseId,id:t.id,title:`${t.courseName} - ${t.title}`,startDate:t.startDate,endDate:t.endDate},t.id)),v.map(t=>e.jsx($,{courseID:t.courseId,id:t.id,title:`${t.courseName} - ${t.title}`,startDate:t.startDate,endDate:t.endDate},t.id))]})}const H=["T2","T3","T4","T5","T6","T7","CN"];function R(){const[a,y]=c.useState(new Date),[h,D]=c.useState([]),[j,b]=c.useState([]);c.useEffect(()=>{(async()=>{var n,s;try{const i=new URLSearchParams;i.append("month",(a.getMonth()+1).toString()),i.append("year",a.getFullYear().toString());const o=await k.get(`/dashboard/get-by-month-year?${i.toString()}`);D(o.data.data.assignments),b(o.data.data.quizzes)}catch(i){M(((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.message)||"Lỗi khi tải sự kiện")}})()},[a]);const u=new Date(a.getFullYear(),a.getMonth()+1,0).getDate(),g=new Date(a.getFullYear(),a.getMonth(),1).getDay(),w=()=>{const r=[];let n=1;for(let s=0;n<=u;s++){const i=[];for(let o=0;o<7;o++)s===0&&o<(g===0?6:g-1)?i.push(null):n<=u?i.push(n++):i.push(null);r.push(i)}return r},v=r=>h.filter(n=>{const s=new Date(n.endDate);return s.getDate()===r&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}),t=r=>j.filter(n=>{const s=new Date(n.endDate);return s.getDate()===r&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}),m=r=>{y(new Date(a.getFullYear(),a.getMonth()+r))};return e.jsx("div",{className:"bg-white mx-4 rounded-md",children:e.jsxs(S,{sx:{p:2,fontFamily:"'Inter', sans-serif"},children:[e.jsxs(S,{mb:1,children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 ml-2",children:d("calendar")}),e.jsxs(S,{display:"flex",justifyContent:"center",alignItems:"center",gap:1,children:[e.jsx(N,{size:"small",onClick:()=>m(-1),children:e.jsx(P,{fontSize:"small"})}),e.jsxs(x,{variant:"subtitle1",fontWeight:"bold",children:[d("month")," ",a.getMonth()+1," / ",a.getFullYear()]}),e.jsx(N,{size:"small",onClick:()=>m(1),children:e.jsx(A,{fontSize:"small"})})]})]}),e.jsx(f,{container:!0,spacing:1,mb:1,children:H.map(r=>e.jsx(f,{item:!0,xs:1.7,children:e.jsx("div",{className:"text-center text-sm font-semibold text-slate-600",children:r})},r))}),w().map((r,n)=>e.jsx(f,{container:!0,spacing:1,children:r.map((s,i)=>{const o=new Date,p=s===o.getDate()&&a.getMonth()===o.getMonth()&&a.getFullYear()===o.getFullYear();return e.jsx(f,{item:!0,xs:1.7,sx:{py:1},children:e.jsxs(I,{variant:"outlined",sx:{minHeight:90,p:.5,bgcolor:p?"#e3f2fd":"transparent",borderColor:p?"primary.light":"divider"},children:[e.jsx(x,{variant:"caption",fontWeight:p?"bold":"light",color:p?"primary.main":"text.secondary",sx:{display:"block",fontSize:"0.8rem"},children:s}),s&&v(s).map(l=>e.jsx(x,{variant:"caption",sx:{display:"block",color:"primary.main",fontSize:"0.75rem",mt:.3,lineHeight:1.2},noWrap:!0,children:e.jsxs(C,{to:`/submission/${l.courseId}/${l.id}`,style:{textDecoration:"none",color:"inherit"},children:["• ",l.courseName," - ",l.title]})},l.id)),s&&t(s).map(l=>e.jsx(x,{variant:"caption",sx:{display:"block",color:"primary.main",fontSize:"0.75rem",mt:.3,lineHeight:1.2},noWrap:!0,children:e.jsxs(C,{to:`/quiz/${l.courseId}/${l.id}`,style:{textDecoration:"none",color:"inherit"},children:["• ",l.courseName," - ",l.title]})},l.id))]})},i)})},n))]})})}const J=()=>(T(),e.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-193px)]",children:[e.jsx(Y,{title:"Bảng điều khiển"}),e.jsx(B,{}),e.jsx(R,{})]}));export{J as default};
